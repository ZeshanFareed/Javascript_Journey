<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        /* Reset */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        /* Main Section */
        .productSection {
            width: 100%;
            padding: 20px;
            background: #f5f5f5;
        }

        /* Heading */
        .productSection h1 {
            text-align: center;
            margin-bottom: 20px;
            font-size: 28px;
        }

        /* Row Layout */
        .productRow {
            display: flex;
            gap: 20px;
        }

        /* Sidebar */
        aside {
            width: 250px;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
        }

        /* Sidebar Heading */
        aside h2 {
            margin-bottom: 15px;
            font-size: 20px;
        }

        /* Category List */
        aside ul {
            list-style: none;
        }

        aside ul li {
            padding: 8px 0;
            color: #007bff;
            cursor: pointer;
        }

        aside ul li:hover {
            text-decoration: underline;
        }

        /* Product Area */
        .ProductList {
            flex: 1;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
        }

        /* Product Heading */
        .ProductList h2 {
            margin-bottom: 20px;
        }

        /* Products Grid */
        .products {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            /* 4 products per row */
            gap: 25px;
            /* space between cards */
        }


        /* Product Card */
        .productItems {
            background: #fff;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
            transition: 0.3s;
        }

        /* Hover Effect */
        .productItems:hover {
            transform: translateY(-5px);
        }

        /* Product Image */
        .productItems img {
            width: 100%;
            height: 150px;
            object-fit: contain;
            margin-bottom: 10px;
        }

        /* Product Name */
        .productItems h3 {
            font-size: 16px;
            color: #333;
        }

        .priceCart {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
        }

        .priceCart button {
            padding: 5px 10px;
            border: none;
            background: #007bff;
            color: white;
            border-radius: 5px;
            cursor: pointer;
        }

        .priceCart button:hover {
            background: #0056b3;
        }

        .activeCat {
            background-color: rgb(231, 6, 6);
            color: white;
        }
    </style>

</head>

<body>
    <section class="productSection">
        <h1>Our Product</h1>
        <div class="productRow">
            <aside>
                <h2>
                    Categpry List
                </h2>
                <ul>

                </ul>
            </aside>
            <div class="ProductList">
                <h2>Product</h2>
                <div class="products">
                    <div class="productItems">
                        <img src="https://cdn.dummyjson.com/product-images/beauty/red-lipstick/1.webp" alt="">
                        <h3>Red Lipstick</h3>
                        <div class="priceCart">
                            <b>Rs 9.09</b>
                            <button>Add to Cart</button>
                        </div>
                    </div>
                    <div class="productItems">
                        <img src="https://cdn.dummyjson.com/product-images/beauty/red-lipstick/1.webp" alt="">
                        <h3>Red Lipstick</h3>
                        <div class="priceCart">
                            <b>Rs 9.09</b>
                            <button>Add to Cart</button>
                        </div>
                    </div>
                    <div class="productItems">
                        <img src="https://cdn.dummyjson.com/product-images/beauty/red-lipstick/1.webp" alt="">
                        <h3>Red Lipstick</h3>
                        <div class="priceCart">
                            <b>Rs 9.09</b>
                            <button>Add to Cart</button>
                        </div>
                    </div>
                    <div class="productItems">
                        <img src="https://cdn.dummyjson.com/product-images/beauty/red-lipstick/1.webp" alt="">
                        <h3>Red Lipstick</h3>
                        <div class="priceCart">
                            <b>Rs 9.09</b>
                            <button>Add to Cart</button>
                        </div>
                    </div>
                </div>
            </div>




        </div>
    </section>
</body>

<script>
    // let GetProducts = async () => {
    //     let firstAPi = await fetch(`https://dummyjson.com/products`)  // bydefault this is GET request
    //     let final = await firstAPi.json()
    //     console.log(final.products)
    // }


    let categoryListElement = document.querySelector("aside ul")
    let productsElement = document.querySelector(".products")

    let currentSLug;

    // if we process with then and catch
    let GetProducts = (catSLug = '') => {
        let apiUrl;
        if (catSLug == '') {
            apiUrl = 'https://dummyjson.com/products'
        }
        else {
            apiUrl = `https://dummyjson.com/products/categories/${catSLug}`
        }
        fetch(apiUrl)
            .then((res) => res.json())
            .then((finalres) => {

                let { products } = finalres

                let productList = ''
                products.forEach((object) => {
                    productList += `<div class="productItems">
                        <img src="${object.thumbnail}" alt="">
                        <h3>${object.title}</h3>
                        <div class="priceCart">
                            <b>Rs ${object.price}</b>
                            <button>Add to Cart</button>
                        </div>
                    </div>`;
                })

                productsElement.innerHTML = productList
            })

            .catch((err) => {
                console.log(err)
            })

    }




    let GetCategory = () => {
        fetch('https://dummyjson.com/products/categories')
            .then((res) => res.json())
            .then((finalres) => {

                let catList = ''
                finalres.forEach(element => {
                    console.log(element)
                    catList += `<li class="${element.slug == currentSLug ? 'activeCat' : ''}" data-slug="${element.slug}">${element.name}</li>`
                });

                categoryListElement.innerHTML = catList
            })
    }


    categoryListElement.addEventListener("click", (e) => {
        if (e.target.tagName == "LI") {
            currentSLug = e.target.getAttribute('data-slug')
            // console.log(currentSLug)
            GetProducts(currentSLug)
            GetCategory()
        }
    })


    GetCategory()
    GetProducts()
</script>

</html>